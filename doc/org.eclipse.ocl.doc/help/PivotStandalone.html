<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Pivot Standalone Configuration</title>
<link href="book.css" rel="stylesheet" type="text/css">
<meta content="DocBook XSL Stylesheets V1.75.1" name="generator">
<link rel="home" href="index.html" title="OCL Documentation">
<link rel="up" href="PivotProgrammersGuide.html" title="Unified or Pivot Programmers Guide">
<link rel="prev" href="PivotEvaluator.html" title="The Pivot Evaluator">
<link rel="next" href="PivotThreadSafety.html" title="Pivot Thread Safety">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<h1 xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0">Pivot Standalone Configuration</h1>
<div class="section" title="Pivot Standalone Configuration">
<div class="titlepage">
<div>
<div>
<h2 class="title" style="clear: both">
<a name="PivotStandalone"></a>Pivot Standalone Configuration</h2>
</div>
</div>
</div>
<p>If you use Eclipse OCL within Eclipse, you should find that the appropriate registrations are provided for you automatically by the plugin registration mechanisms.</p>
<p>However if you use Eclipse OCL outside Eclipse, for instance in JUnit tests, basic configuration occurs automatically when you use some form of 
				<code class="code">org.eclipse.ocl.pivot.utilities.OCL.newInstance(...)</code> to create an OCL facade/handle. However optional facilities require 
				further configuration by some of the following registrations in your code. Omission of required registrations is diagnosed by run-time messages.
			</p>
<div class="literallayout">
<p>
<code class="code">org.eclipse.ocl.pivot.uml.UMLStandaloneSetup.init();<br>
org.eclipse.ocl.xtext.completeocl.CompleteOCLStandaloneSetup.doSetup();<br>
org.eclipse.ocl.xtext.oclinecore.OCLinEcoreStandaloneSetup.doSetup();<br>
org.eclipse.ocl.xtext.oclstdlib.OCLstdlibStandaloneSetup.doSetup();<br>

<br>

</code>
</p>
</div>
<p></p>
<p>These are elaborated on below.</p>
<div class="section" title="UML support">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="UMLsupport"></a>UML support</h3>
</div>
</div>
</div>
<p>As of the Mars release, support for UML is optional although omitting it in an Eclipse installation requires some effort to install Eclipse OCL without installing the 
					<code class="code">org.eclipse.ocl.pivot.uml</code> plugin. Standalone users must ensure that 
					<code class="code">org.eclipse.ocl.pivot.uml</code> is on the classpath and that the UML Abstract Syntax Resource Factory is registered. This is achieved by invoking 
					<code class="code">org.eclipse.ocl.pivot.uml.UMLStandaloneSetup.init()</code> before any significant OCL object construction occurs. Attempting to load UML models without UML support causes distinctive failures that are diagnosed by a recommendation to provide the preceding initialization. 
				</p>
</div>
<div class="section" title="Xtext Parsers">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="XtextParsers"></a>Xtext Parsers</h3>
</div>
</div>
</div>
<p>If you want to be able to convert any textual form of OCL to its internal pivot form you need to register the relevant parser.</p>
<p>*.ocl Complete OCL documents are initialized by 
					<code class="code">CompleteOCLStandaloneSetup.doSetup()</code>.
				</p>
<p>*.oclinecore metamodels are initialized by 
					<code class="code">OCLinEcoreStandaloneSetup.doSetup()</code>
				
</p>
<p>*.oclstdlib OCL Standard Library definitions are initialized by 
					<code class="code">OCLstdlibStandaloneSetup.doSetup()</code>.
				</p>
<p>*.ecore, *.essentialocl, *.uml files or general use of the query API is initialized by 
					<code class="code">EssentialOCLStandaloneSetup.doSetup()</code>.
				</p>
<p>Each of the above ensures that everything that it requires is installed. The various set ups can be found in one of the following packages:</p>
<div class="literallayout">
<p>
<code class="code">org.eclipse.ocl.xtext.completeocl.<br>
org.eclipse.ocl.xtext.essentialocl.<br>
org.eclipse.ocl.xtext.oclinecore.<br>
org.eclipse.ocl.xtext.oclstdlib.<br>

</code>
</p>
</div>
<p></p>
</div>
<div class="section" title="OCL Standard Library">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="OCLStandardLibrary"></a>OCL Standard Library</h3>
</div>
</div>
</div>
<p>As of the Mars release, the default OCL Standard Library is automatically installed by a lazy invocation of 
					<code class="code">org.eclipse.ocl.pivot.model.OCLstdlib.install()</code> which installs a compiled shareable form of 
					<code class="code">/org.eclipse.ocl.library/model/OCL-2.5.oclstdlib</code>.
				</p>
<p>If you want to use an alternate library examine the code for the standard installation above, and if you want to compile your library examine the 
					<code class="code">/org.eclipse.ocl.examples.build/src/org/eclipse/ocl/examples/build/GenerateOCLstdlibModel.mwe2</code> launcher for the

					<code class="code">/org.eclipse.ocl.examples.build/src/org/eclipse/ocl/examples/build/xtend/GenerateOCLstdlibXtend.xtend</code> Xtend template.
				</p>
<p>Note that the library is extensible and importable so you may import your own library that in turn imports the standard library. 
					<code class="code">/org.eclipse.qvtd.build/src/org/eclipse/qvtd/build/mwe2/GenerateQVTdLibraryModels.mwe2</code> demonstrates generation of an extended library.
				</p>
<p>If you provide a custom library that fails to meet the minimal requirements of defining the basic library types (e.g. Boolean, Set, Tuple) and methods (e.g. OclAny::&ldquo;=&rdquo;) you get an error such as &ldquo;No 'Boolean' type in the OCL Standard Library&rdquo;. The minimal library is 
					<code class="code">/org.eclipse.ocl.examples.xtext.tests/src/org/eclipse/ocl/examples/test/xtext/models/minimal.oclstdlib</code>.
				</p>
</div>
<div class="section" title="Pivot Delegates">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="PivotDelegates"></a>Pivot Delegates</h3>
</div>
</div>
</div>
<p>As of the Mars release, the EMF delegate registrations for textual OCL embedded within Ecore models are installed automatically. The registrations ensure that EMF get, call or validate activities dispatch the embedded OCL to the OCL delegates. The required registrations may be provided by 
					<code class="code">OCLDelegateDomain.initialize(ResourceSet)</code> from the 
					<code class="code">org.eclipse.ocl.pivot.internal.delegate</code> package.
				</p>
<p>This may be invoked with a null argument to install the registrations in the global EPackage.Registry rather than a specified local registry.</p>
</div>
<div class="section" title="platform:/plugin and platform:/resource URIs">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="platformpluginandplatformresourceURIs"></a>platform:/plugin and platform:/resource URIs</h3>
</div>
</div>
</div>
<p>As of the Mars release, lightweight or heavyweight support for URIs is a construction option for 
					<code class="code">org.eclipse.ocl.pivot.utilities.OCL.newInstance(...)</code>.
				</p>
<p>Using 
					<code class="code">OCL.NO_PROJECTS</code> gives lightweight support using only what is directly accessible in a conventional EMF ResourceSet and its delegate registries.
				</p>
<p>Using 
					<code class="code">OCL.CLASS_PATH</code> gives the heavyweight support enabling use of 
					<code class="code">platform:/plugin/...</code> or 
					<code class="code">platform:/resource/...</code> URIs in a standalone configuration. This is a costly activity that involves scanning the classpath and exploiting the content of any plugin.xml and MANIFEST.MF files that are found.
				</p>
</div>
<div class="section" title="Classpath">
<div class="titlepage">
<div>
<div>
<h3 class="title">
<a name="Classpath"></a>Classpath</h3>
</div>
</div>
</div>
<p>If your standalone environment supports OSGI bundles, as will be the case when you use Eclipse to launch a JUnit test or a transformation, the required plugin dependencies are easily configured in the MANIFEST.MF using JDT quick fixes, or the Manifest editor.</p>
<p>For a totally standalone Java launch, you must identify the exact spelling of each JAR that you require and identify it on your Java classpath. The Eclipse JARs may be found in the plugins folder adjacent to your eclipse.exe. So you may need 
					<code class="code">org.eclipse.ocl.common_1.0.0.v20120516-1543.jar</code> amongst many others. The required JARs can be recursively determined by looking at the Class Not Found Exceptions from the Java launch and locating the plugin with a similar name prefix. This is very tedious and has to be repeated each time you upgrade, so don&rsquo;t do it. Use OSGI. However if you must, the following dependency trees may provide some clues.
				</p>
<p>The dependency tree for the basic parsing and evaluation is:</p>
<div class="literallayout">
<p>
<code class="code">org.eclipse.ocl.common<br>
&nbsp;&nbsp;org.eclipse.ocl.pivot<br>
&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.pivot.uml<br>
&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.xtext.base<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.xtext.essentialocl<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.xtext.completeocl<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.xtext.oclinecore<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.xtext.oclstdlib<br>

</code>
</p>
</div>
<p></p>
<p>Additionally the UI requires</p>
<div class="literallayout">
<p>
<code class="code">org.eclipse.ocl.common.ui<br>
&nbsp;&nbsp;org.eclipse.ocl.markup<br>
&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.markup.ui<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.xtext.essentialocl.ui<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.xtext.completeocl.ui<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.xtext.oclinecore.ui<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.xtext.oclstdlib.ui<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.examples.xtext.console<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.ocl.pivot.ui<br>

</code>
</p>
</div>
<p></p>
<p>You may also need the Xtext, EMF, MWE, Orbit plugins and their dependencies</p>
<div class="literallayout">
<p>
<code class="code">com.google.guava<br>
com.google.inject<br>
org.apache.log4j<br>
org.eclipse.emf.common<br>
&nbsp;&nbsp;org.eclipse.emf.ecore<br>
&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.emf.codegen<br>
&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.emf.ecore.xmi<br>
org.eclipse.xtext<br>
&nbsp;&nbsp;org.eclipse.xtext.common.types<br>
&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.xtext.common.types.ui<br>
&nbsp;&nbsp;org.eclipse.xtext.ui<br>
&nbsp;&nbsp;&nbsp;&nbsp;org.eclipse.xtext.ui.shared<br>
&nbsp;&nbsp;org.eclipse.xtext.util<br>

</code>
</p>
</div>
<p></p>
</div>
</div>
</body>
</html>
