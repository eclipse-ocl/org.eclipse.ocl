-- This is a very selective section of Pivot.ocl used to debug failures. It should be trivial and pass in real testing.
import 'platform:/resource/org.eclipse.ocl.pivot/model/Pivot.ecore'

--include 'platform:/resource/org.eclipse.ocl.pivot/model/Types.ocl'

package ocl

context IterateExp
--inv SafeSourceCanBeNull: (isSafe and (ownedSource <> null) and (ownedSource.type <> null)) implies
inv SafeSourceCanBeNull: ((ownedSource <> null) and (ownedSource.type <> null)) implies
	let sourceType = ownedSource?.type in
--	if sourceType.oclIsKindOf(MapType) then sourceType.oclAsType(MapType).keysAreNullFree else sourceType.oclAsType(CollectionType).isNullFree endif
--	let sourceType = if ownedSource <> null then ownedSource.type else null endif in
--	if sourceType.oclIsKindOf(MapType) then sourceType.oclAsType(MapType).keysAreNullFree else sourceType.oclAsType(CollectionType).isNullFree endif
	sourceType <> null
	

endpackage
